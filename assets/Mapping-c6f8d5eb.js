var Ne=(c,p,l)=>{if(!p.has(c))throw TypeError("Cannot "+l)};var g=(c,p,l)=>(Ne(c,p,"read from private field"),l?l.call(c):p.get(c)),Y=(c,p,l)=>{if(p.has(c))throw TypeError("Cannot add the same private member more than once");p instanceof WeakSet?p.add(c):p.set(c,l)},W=(c,p,l,u)=>(Ne(c,p,"write to private field"),u?u.call(c,l):p.set(c,l),l);import{s as At,E as je,d as qn,_ as Ae}from"./index-1b9aa78a.js";import{c as Hn,g as Xn}from"./_commonjsHelpers-725317a4.js";import{P as Yn,a as Wn}from"./debugConfig-0e4d4a94.js";function Zn(c,p){for(var l=0;l<p.length;l++){const u=p[l];if(typeof u!="string"&&!Array.isArray(u)){for(const _ in u)if(_!=="default"&&!(_ in c)){const C=Object.getOwnPropertyDescriptor(u,_);C&&Object.defineProperty(c,_,C.get?C:{enumerable:!0,get:()=>u[_]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}function Jn(c,p,l){const u=c.addFolder({title:l,expanded:!1});let _=0;const C=async()=>{const k=qn.$wrapper;if(p.orbitControls)k.style.pointerEvents="",p.orbitControls.dispose(),p.orbitControls=null,p.position.set(0,0,10),p.far=_,p.updateProjectionMatrix();else{k.style.pointerEvents="all";const V=await Ae(()=>import("./OrbitControls-c476c608.js"),["assets/OrbitControls-c476c608.js","assets/index-1b9aa78a.js","assets/index-4bea3ac6.css"]);p.orbitControls=new V.OrbitControls(p,k),p.orbitControls.enableDamping=!0,p.orbitControls.dampingFactor=.15,p.orbitControls.enableZoom=!0,p.orbitControls.update(),p.position.z+=10,_=p.far,p.far=200,p.updateProjectionMatrix()}},G={Orbit:!1};return new URLSearchParams(location.search).has("orbit")&&(C(),G.Orbit=!0),At.on(je.TICK,()=>{var k;return(k=p.orbitControls)==null?void 0:k.update()}),u.addInput(G,"Orbit",{title:"OrbitControls"}).on("change",C),u.addInput(p,"fov"),u.addInput(p,"near"),u.addInput(p,"far"),u.on("change",()=>p.updateProjectionMatrix()),u}function Qn(c){}const ts=Object.freeze(Object.defineProperty({__proto__:null,createPane:Jn,debug:Qn},Symbol.toStringTag,{value:"Module"}));function es(c){}const is=Object.freeze(Object.defineProperty({__proto__:null,debug:es},Symbol.toStringTag,{value:"Module"}));function ns(c,p,l){const u=c.addFolder({title:l,expanded:!0});return u.addMonitor(p.info.memory,"geometries",{label:"Geometries"}),u.addMonitor(p.info.memory,"textures",{label:"Textures"}),u.addMonitor(p.info.programs,"length",{label:"Programs"}),u.addMonitor(p.info.render,"calls",{label:"Calls"}),u.addMonitor(p.info.render,"points",{label:"Points"}),u.addMonitor(p.info.render,"triangles",{label:"Triangles"}),p.info.autoReset=!1,At.on(je.RENDER,()=>p.info.reset()),u}function ss(c){}const rs=Object.freeze(Object.defineProperty({__proto__:null,createPane:ns,debug:ss},Symbol.toStringTag,{value:"Module"}));var nt={},os={get exports(){return nt},set exports(c){nt=c}};(function(c,p){(function(l,u){u(p)})(Hn,function(l){class u{constructor(t){this.controller_=t}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class _{constructor(t){this.target=t}}class C extends _{constructor(t,e,n,s){super(t),this.value=e,this.presetKey=n,this.last=s??!0}}function G(i){return i}function m(i){return i==null}const k={alreadydisposed:()=>"View has been already disposed",invalidparams:i=>`Invalid parameters for '${i.name}'`,nomatchingcontroller:i=>`No matching controller for '${i.key}'`,nomatchingview:i=>`No matching view for '${JSON.stringify(i.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:i=>`Property '${i.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class V{constructor(t){var e;this.message=(e=k[t.type](t.context))!==null&&e!==void 0?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new V({type:"alreadydisposed"})}static notBindable(){return new V({type:"notbindable"})}static propertyNotFound(t){return new V({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new V({type:"shouldneverhappen"})}}class z{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter(s=>s.handler!==e)),this}emit(t,e){const n=this.observers_[t];n&&n.forEach(s=>{s.handler(e)})}}const Ie="tp";function d(i){return(e,n)=>[Ie,"-",i,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function $e(i,t){return e=>t(i(e))}function Ke(i){return i.rawValue}function L(i,t){i.emitter.on("change",$e(Ke,t)),t(i.rawValue)}function F(i,t,e){L(i.value(t),e)}function Ge(i,t,e){e?i.classList.add(t):i.classList.remove(t)}function ot(i,t){return e=>{Ge(i,t,e)}}function Fe(i,t){L(i,e=>{t.textContent=e??""})}const _t=d("btn");class Ue{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(_t()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(_t("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const s=t.createElement("div");s.classList.add(_t("t")),Fe(e.props.value("title"),s),this.buttonElement.appendChild(s)}}class qe{constructor(t,e){this.emitter=new z,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Ue(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class He{constructor(t,e){var n;this.constraint_=e==null?void 0:e.constraint,this.equals_=(n=e==null?void 0:e.equals)!==null&&n!==void 0?n:(s,r)=>s===r,this.emitter=new z,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=e??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(t):t,r=this.rawValue_;this.equals_(r,s)&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:s,sender:this}))}}class Xe{constructor(t){this.emitter=new z,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=e??{forceEmit:!1,last:!0},s=this.value_;s===t&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:this.value_,sender:this}))}}function M(i,t){const e=t==null?void 0:t.constraint,n=t==null?void 0:t.equals;return!e&&!n?new Xe(i):new He(i,t)}class v{constructor(t){this.emitter=new z,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",()=>{this.emitter.emit("change",{key:e,sender:this})})}static createCore(t){return Object.keys(t).reduce((n,s)=>Object.assign(n,{[s]:M(t[s])}),{})}static fromObject(t){const e=this.createCore(t);return new v(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function Ye(i,t){const n=Object.keys(t).reduce((s,r)=>{if(s===void 0)return;const o=t[r],a=o(i[r]);return a.succeeded?Object.assign(Object.assign({},s),{[r]:a.value}):void 0},{});return n}function We(i,t){return i.reduce((e,n)=>{if(e===void 0)return;const s=t(n);if(!(!s.succeeded||s.value===void 0))return[...e,s.value]},[])}function Ze(i){return i===null?!1:typeof i=="object"}function D(i){return t=>e=>{if(!t&&e===void 0)return{succeeded:!1,value:void 0};if(t&&e===void 0)return{succeeded:!0,value:void 0};const n=i(e);return n!==void 0?{succeeded:!0,value:n}:{succeeded:!1,value:void 0}}}function It(i){return{custom:t=>D(t)(i),boolean:D(t=>typeof t=="boolean"?t:void 0)(i),number:D(t=>typeof t=="number"?t:void 0)(i),string:D(t=>typeof t=="string"?t:void 0)(i),function:D(t=>typeof t=="function"?t:void 0)(i),constant:t=>D(e=>e===t?t:void 0)(i),raw:D(t=>t)(i),object:t=>D(e=>{if(Ze(e))return Ye(e,t)})(i),array:t=>D(e=>{if(Array.isArray(e))return We(e,t)})(i)}}const j={optional:It(!0),required:It(!1)};function U(i,t){const e=j.required.object(t)(i);return e.succeeded?e.value:void 0}function Je(i){console.warn([`Missing '${i.key}' of ${i.target} in ${i.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function Qe(i){return i&&i.parentElement&&i.parentElement.removeChild(i),null}class ft{constructor(t){this.value_=t}static create(t){return[new ft(t),(e,n)=>{t.setRawValue(e,n)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const ti=d("");function $t(i,t){return ot(i,ti(void 0,t))}class A extends v{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=ft.create(M(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,s;const r=t??{};return new A(v.createCore({disabled:(e=r.disabled)!==null&&e!==void 0?e:!1,disposed:!1,hidden:(n=r.hidden)!==null&&n!==void 0?n:!1,parent:(s=r.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){L(this.globalDisabled_,$t(t,"disabled")),F(this,"hidden",$t(t,"hidden"))}bindDisabled(t){L(this.globalDisabled_,e=>{t.disabled=e})}bindTabIndex(t){L(this.globalDisabled_,e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const n=t.previousRawValue;n==null||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(e=this.get("parent"))===null||e===void 0||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function ei(){return["veryfirst","first","last","verylast"]}const Kt=d(""),Gt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Ft{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ei().forEach(n=>{e.classList.remove(Kt(void 0,Gt[n]))}),this.blade.get("positions").forEach(n=>{e.classList.add(Kt(void 0,Gt[n]))})}),this.viewProps.handleDispose(()=>{Qe(e)})}get parent(){return this.parent_}set parent(t){if(this.parent_=t,!("parent"in this.viewProps.valMap_)){Je({key:"parent",target:A.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const w="http://www.w3.org/2000/svg";function at(i){i.offsetHeight}function ii(i,t){const e=i.style.transition;i.style.transition="none",t(),i.style.transition=e}function Ut(i){return i.ontouchstart!==void 0}function ni(i){for(;i.childNodes.length>0;)i.removeChild(i.childNodes[0])}function si(i){return i.relatedTarget?i.relatedTarget:"explicitOriginalTarget"in i?i.explicitOriginalTarget:null}const Z=d("lbl");function ri(i,t){const e=i.createDocumentFragment();return t.split(`
`).map(s=>i.createTextNode(s)).forEach((s,r)=>{r>0&&e.appendChild(i.createElement("br")),e.appendChild(s)}),e}class qt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Z()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Z("l")),F(e.props,"label",r=>{m(r)?this.element.classList.add(Z(void 0,"nol")):(this.element.classList.remove(Z(void 0,"nol")),ni(n),n.appendChild(ri(t,r)))}),this.element.appendChild(n),this.labelElement=n;const s=t.createElement("div");s.classList.add(Z("v")),this.element.appendChild(s),this.valueElement=s}}class lt extends Ft{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new qt(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class oi extends Ft{constructor(t){super(t),this.value=t.value}}class wt extends v{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=v.createCore(e);return new wt(n)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!m(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};F(this,"expanded",n),F(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function ai(i){return wt.create(i)}function li(i,t){let e=0;return ii(t,()=>{i.set("expandedHeight",null),i.set("temporaryExpanded",!0),at(t),e=t.clientHeight,i.set("temporaryExpanded",null),at(t)}),e}function Ht(i,t){t.style.height=i.styleHeight}function pi(i,t){i.value("expanded").emitter.on("beforechange",()=>{i.set("completed",!1),m(i.get("expandedHeight"))&&i.set("expandedHeight",li(i,t)),i.set("shouldFixHeight",!0),at(t)}),i.emitter.on("change",()=>{Ht(i,t)}),Ht(i,t),t.addEventListener("transitionend",e=>{e.propertyName==="height"&&i.cleanUpTransition()})}class Xt{constructor(t,e){const n=d(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}class pt extends oi{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new qt(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class ui{constructor(){this.disabled=!1,this.emitter=new z}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class hi{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new z,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Yt{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((e,n)=>n.constrain(e),t)}}function ut(i,t){if(i instanceof t)return i;if(i instanceof Yt){const e=i.constraints.reduce((n,s)=>n||(s instanceof t?s:null),null);if(e)return e}return null}class Wt{constructor(t){this.values=v.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class xt{constructor(t){this.values=v.fromObject({max:t.max,min:t.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(t){const e=this.values.get("max"),n=this.values.get("min");let s=t;return m(n)||(s=Math.max(s,n)),m(e)||(s=Math.min(s,e)),s}}class ht{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step,n=Math.round((t-e)/this.step);return e+n*this.step}}const Zt=d("pop");class ci{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Zt()),e.viewProps.bindClassModifiers(this.element),L(e.shows,ot(this.element,Zt(void 0,"v")))}}class di{constructor(t,e){this.shows=M(!1),this.viewProps=e.viewProps,this.view=new ci(t,{shows:this.shows,viewProps:this.viewProps})}}const Jt=d("txt");class vi{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Jt()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(Jt("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class bi{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new vi(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const n=t.currentTarget.value,s=this.parser_(n);m(s)||(this.value.rawValue=s),this.view.refresh()}}function mi(i){return i==="false"?!1:!!i}class gi{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const _i={"**":(i,t)=>Math.pow(i,t),"*":(i,t)=>i*t,"/":(i,t)=>i/t,"%":(i,t)=>i%t,"+":(i,t)=>i+t,"-":(i,t)=>i-t,"<<":(i,t)=>i<<t,">>":(i,t)=>i>>t,">>>":(i,t)=>i>>>t,"&":(i,t)=>i&t,"^":(i,t)=>i^t,"|":(i,t)=>i|t};class fi{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=_i[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const wi={"+":i=>i,"-":i=>-i,"~":i=>~i};class xi{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=wi[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ct(i){return(t,e)=>{for(let n=0;n<i.length;n++){const s=i[n](t,e);if(s!=="")return s}return""}}function J(i,t){var e;const n=i.substr(t).match(/^\s+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Ci(i,t){const e=i.substr(t,1);return e.match(/^[1-9]$/)?e:""}function Q(i,t){var e;const n=i.substr(t).match(/^[0-9]+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function yi(i,t){const e=Q(i,t);if(e!=="")return e;const n=i.substr(t,1);if(t+=1,n!=="-"&&n!=="+")return"";const s=Q(i,t);return s===""?"":n+s}function yt(i,t){const e=i.substr(t,1);if(t+=1,e.toLowerCase()!=="e")return"";const n=yi(i,t);return n===""?"":e+n}function Qt(i,t){const e=i.substr(t,1);if(e==="0")return e;const n=Ci(i,t);return t+=n.length,n===""?"":n+Q(i,t)}function Ei(i,t){const e=Qt(i,t);if(t+=e.length,e==="")return"";const n=i.substr(t,1);if(t+=n.length,n!==".")return"";const s=Q(i,t);return t+=s.length,e+n+s+yt(i,t)}function Pi(i,t){const e=i.substr(t,1);if(t+=e.length,e!==".")return"";const n=Q(i,t);return t+=n.length,n===""?"":e+n+yt(i,t)}function ki(i,t){const e=Qt(i,t);return t+=e.length,e===""?"":e+yt(i,t)}const Vi=Ct([Ei,Pi,ki]);function zi(i,t){var e;const n=i.substr(t).match(/^[01]+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Mi(i,t){const e=i.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0b")return"";const n=zi(i,t);return n===""?"":e+n}function Ti(i,t){var e;const n=i.substr(t).match(/^[0-7]+/);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Li(i,t){const e=i.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0o")return"";const n=Ti(i,t);return n===""?"":e+n}function Di(i,t){var e;const n=i.substr(t).match(/^[0-9a-f]+/i);return(e=n&&n[0])!==null&&e!==void 0?e:""}function Si(i,t){const e=i.substr(t,2);if(t+=e.length,e.toLowerCase()!=="0x")return"";const n=Di(i,t);return n===""?"":e+n}const Oi=Ct([Mi,Li,Si]),Ri=Ct([Oi,Vi]);function Bi(i,t){const e=Ri(i,t);return t+=e.length,e===""?null:{evaluable:new gi(e),cursor:t}}function Ni(i,t){const e=i.substr(t,1);if(t+=e.length,e!=="(")return null;const n=ee(i,t);if(!n)return null;t=n.cursor,t+=J(i,t).length;const s=i.substr(t,1);return t+=s.length,s!==")"?null:{evaluable:n.evaluable,cursor:t}}function ji(i,t){var e;return(e=Bi(i,t))!==null&&e!==void 0?e:Ni(i,t)}function te(i,t){const e=ji(i,t);if(e)return e;const n=i.substr(t,1);if(t+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;const s=te(i,t);return s?(t=s.cursor,{cursor:t,evaluable:new xi(n,s.evaluable)}):null}function Ai(i,t,e){e+=J(t,e).length;const n=i.filter(s=>t.startsWith(s,e))[0];return n?(e+=n.length,e+=J(t,e).length,{cursor:e,operator:n}):null}function Ii(i,t){return(e,n)=>{const s=i(e,n);if(!s)return null;n=s.cursor;let r=s.evaluable;for(;;){const o=Ai(t,e,n);if(!o)break;n=o.cursor;const a=i(e,n);if(!a)return null;n=a.cursor,r=new fi(o.operator,r,a.evaluable)}return r?{cursor:n,evaluable:r}:null}}const $i=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((i,t)=>Ii(i,t),te);function ee(i,t){return t+=J(i,t).length,$i(i,t)}function Ki(i){const t=ee(i,0);return!t||t.cursor+J(i,t.cursor).length!==i.length?null:t.evaluable}function ct(i){var t;const e=Ki(i);return(t=e==null?void 0:e.evaluate())!==null&&t!==void 0?t:null}function Gi(i){if(typeof i=="number")return i;if(typeof i=="string"){const t=ct(i);if(!m(t))return t}return 0}function f(i){return t=>t.toFixed(Math.max(Math.min(i,20),0))}const Fi=f(0);function dt(i){return Fi(i)+"%"}function Ui(i){return String(i)}function ie(i,t){for(;i.length<t;)i.push(void 0)}function qi(i){const t=[];return ie(t,i),M(t)}function Hi(i){const t=i.indexOf(void 0);return t<0?i:i.slice(0,t)}function Xi(i,t){const e=[...Hi(i),t];return e.length>i.length?e.splice(0,e.length-i.length):ie(e,i.length),e}function ne({primary:i,secondary:t,forward:e,backward:n}){let s=!1;function r(o){s||(s=!0,o(),s=!1)}i.emitter.on("change",o=>{r(()=>{t.setRawValue(e(i,t),o.options)})}),t.emitter.on("change",o=>{r(()=>{i.setRawValue(n(i,t),o.options)}),r(()=>{t.setRawValue(e(i,t),o.options)})}),r(()=>{t.setRawValue(e(i,t),{forceEmit:!1,last:!0})})}function q(i,t){const e=i*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+e:t.downKey?-e:0}function vt(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}function se(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}function Yi(i){return i==="ArrowUp"||i==="ArrowDown"}function re(i){return Yi(i)||i==="ArrowLeft"||i==="ArrowRight"}function Et(i,t){var e,n;const s=t.ownerDocument.defaultView,r=t.getBoundingClientRect();return{x:i.pageX-(((e=s&&s.scrollX)!==null&&e!==void 0?e:0)+r.left),y:i.pageY-(((n=s&&s.scrollY)!==null&&n!==void 0?n:0)+r.top)}}class bt{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new z,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),(e=t.currentTarget)===null||e===void 0||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Et(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Et(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Et(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=(e=t.targetTouches.item(0))!==null&&e!==void 0?e:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function b(i,t,e,n,s){const r=(i-t)/(e-t);return n+r*(s-n)}function oe(i){return String(i.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function H(i,t,e){return Math.min(Math.max(i,t),e)}const y=d("txt");class Wi{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(y(),y(void 0,"num")),e.arrayPosition&&this.element.classList.add(y(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(y("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(y()),this.inputElement.classList.add(y("i"));const s=t.createElement("div");s.classList.add(y("k")),this.element.appendChild(s),this.knobElement=s;const r=t.createElementNS(w,"svg");r.classList.add(y("g")),this.knobElement.appendChild(r);const o=t.createElementNS(w,"path");o.classList.add(y("gb")),r.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(w,"path");a.classList.add(y("gh")),r.appendChild(a),this.guideHeadElem_=a;const h=t.createElement("div");h.classList.add(d("tt")()),this.knobElement.appendChild(h),this.tooltipElem_=h,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(y(void 0,"drg"));return}this.element.classList.add(y(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),s=H(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+s},0 L${n},4 L${n+s},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Zi{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.sliderProps_=(n=e.sliderProps)!==null&&n!==void 0?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=M(null),this.view=new Wi(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new bt(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const s=(e=this.sliderProps_)===null||e===void 0?void 0:e.get("minValue"),r=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("maxValue");let o=t;return s!==void 0&&(o=Math.max(o,s)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(t){const n=t.currentTarget.value,s=this.parser_(n);m(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(t){const e=q(this.baseStep_,vt(t));e!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){q(this.baseStep_,vt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("draggingScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);e!==null&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function Pt(i,t){i.write(t)}function Ji(i){const t=i?ut(i,ht):null;return t?t.step:null}function Qi(i,t){const e=i&&ut(i,ht);return e?oe(e.step):Math.max(oe(t),2)}function ae(i){const t=Ji(i);return t??1}function tn(i,t){var e;const n=i&&ut(i,ht),s=Math.abs((e=n==null?void 0:n.step)!==null&&e!==void 0?e:t);return s===0?.1:Math.pow(10,Math.floor(Math.log10(s))-1)}function mt(i){return[i[0],i[1],i[2]]}function le(i){const t=H(Math.floor(i),0,255).toString(16);return t.length===1?`0${t}`:t}function en(i,t="#"){const e=mt(i.getComponents("rgb")).map(le).join("");return`${t}${e}`}function nn(i,t="#"){const e=i.getComponents("rgb"),n=[e[0],e[1],e[2],e[3]*255].map(le).join("");return`${t}${n}`}function sn(i,t){const e=f(t==="float"?2:0);return`rgb(${mt(i.getComponents("rgb",t)).map(s=>e(s)).join(", ")})`}function rn(i){return t=>sn(t,i)}function on(i,t){const e=f(2),n=f(t==="float"?2:0);return`rgba(${i.getComponents("rgb",t).map((r,o)=>(o===3?e:n)(r)).join(", ")})`}function an(i){return t=>on(t,i)}function ln(i){const t=[f(0),dt,dt];return`hsl(${mt(i.getComponents("hsl")).map((n,s)=>t[s](n)).join(", ")})`}function pn(i){const t=[f(0),dt,dt,f(2)];return`hsla(${i.getComponents("hsl").map((n,s)=>t[s](n)).join(", ")})`}function un(i,t){const e=f(t==="float"?2:0),n=["r","g","b"];return`{${mt(i.getComponents("rgb",t)).map((r,o)=>`${n[o]}: ${e(r)}`).join(", ")}}`}function hn(i){return t=>un(t,i)}function cn(i,t){const e=f(2),n=f(t==="float"?2:0),s=["r","g","b","a"];return`{${i.getComponents("rgb",t).map((o,a)=>{const h=a===3?e:n;return`${s[a]}: ${h(o)}`}).join(", ")}}`}function dn(i){return t=>cn(t,i)}[...["int","float"].reduce((i,t)=>[...i,{format:{alpha:!1,mode:"rgb",notation:"func",type:t},stringifier:rn(t)},{format:{alpha:!0,mode:"rgb",notation:"func",type:t},stringifier:an(t)},{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:hn(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:dn(t)}],[])];class vn{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((n,s)=>{var r,o;return(o=(r=this.components[s])===null||r===void 0?void 0:r.constrain(n))!==null&&o!==void 0?o:n});return this.asm_.fromComponents(e)}}const pe=d("pndtxt");class bn{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(pe()),this.textViews.forEach(n=>{const s=t.createElement("div");s.classList.add(pe("a")),s.appendChild(n.element),this.element.appendChild(s)})}}function mn(i,t,e){return new Zi(i,{arrayPosition:e===0?"fst":e===t.axes.length-1?"lst":"mid",baseStep:t.axes[e].baseStep,parser:t.parser,props:t.axes[e].textProps,value:M(0,{constraint:t.axes[e].constraint}),viewProps:t.viewProps})}class kt{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((n,s)=>mn(t,e,s)),this.acs_.forEach((n,s)=>{ne({primary:this.value,secondary:n.value,forward:r=>e.assembly.toComponents(r.rawValue)[s],backward:(r,o)=>{const a=e.assembly.toComponents(r.rawValue);return a[s]=o.rawValue,e.assembly.fromComponents(a)}})}),this.view=new bn(t,{textViews:this.acs_.map(n=>n.view)})}}function gn(i,t){return"step"in i&&!m(i.step)?new ht(i.step,t):null}function _n(i){return!m(i.max)&&!m(i.min)?new Wt({max:i.max,min:i.min}):!m(i.max)||!m(i.min)?new xt({max:i.max,min:i.min}):null}const fn={monitor:{defaultInterval:200,defaultLineCount:3}},O=d("grl");class wn{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(O()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(w,"svg");n.classList.add(O("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const s=t.createElementNS(w,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const r=t.createElement("div");r.classList.add(O("t"),d("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.props_.get("minValue"),s=this.props_.get("maxValue"),r=[];this.value.rawValue.forEach((S,jt)=>{if(S===void 0)return;const Fn=b(jt,0,e,0,t.width),Un=b(S,n,s,t.height,0);r.push([Fn,Un].join(","))}),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){o.classList.remove(O("t","a"));return}const h=b(this.cursor_.rawValue,0,e,0,t.width),P=b(a,n,s,t.height,0);o.style.left=`${h}px`,o.style.top=`${P}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(O("t","a"))||(o.classList.add(O("t","a"),O("t","in")),at(o),o.classList.remove(O("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class xn{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=M(-1),this.view=new wn(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!Ut(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const n=new bt(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(b(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(b(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}class ue{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return(t=this.controller_.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller_.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller_.emitter.on(t,()=>{n(new _(this))}),this}}class Cn extends _{constructor(t,e,n){super(t),this.cell=e,this.index=n}}class he extends u{constructor(t){super(t),this.cellToApiMap_=new Map,this.emitter_=new z;const e=this.controller_.valueController;e.cellControllers.forEach((n,s)=>{const r=new ue(n);this.cellToApiMap_.set(n,r),n.emitter.on("click",()=>{const o=s%e.size[0],a=Math.floor(s/e.size[0]);this.emitter_.emit("click",{event:new Cn(this,r,[o,a])})})})}cell(t,e){const n=this.controller_.valueController,s=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(s)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,s=>{n(s.event)}),this}}class Vt{constructor(t,e){this.size=e.size;const[n,s]=this.size,r=[];for(let o=0;o<s;o++)for(let a=0;a<n;a++){const h=new qe(t,{props:v.fromObject(Object.assign({},e.cellConfig(a,o))),viewProps:A.create()});r.push(h)}this.cellCs_=r,this.viewProps=A.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(o=>{o.viewProps.set("disposed",!0)})}),this.view=new Xt(t,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach(o=>{this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}}const yn={id:"buttongrid",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(i){const t=j,e=U(i,{cells:t.required.function,size:t.required.array(t.required.number),view:t.required.constant("buttongrid"),label:t.optional.string});return e?{params:e}:null},controller(i){return new lt(i.document,{blade:i.blade,props:v.fromObject({label:i.params.label}),valueController:new Vt(i.document,{cellConfig:i.params.cells,size:i.params.size})})},api(i){return!(i.controller instanceof lt)||!(i.controller.valueController instanceof Vt)?null:new he(i.controller)}};class ce extends u{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.controller_.valueController.value.emitter.on(t,s=>{n(new C(this,s.rawValue,void 0,s.options.last))}),this}}function E(i,t,e){return i*(1-e)+t*e}const En=20,Pn=.001,zt=100;function kn(i,t){let e=.25,n=.5,s=-1;for(let r=0;r<En;r++){const[o,a]=i.curve(n);if(n+=e*(o<t?1:-1),s=a,e*=.5,Math.abs(t-o)<Pn)break}return s}class R{constructor(t=0,e=0,n=1,s=1){this.cache_=[],this.comps_=[t,e,n,s]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(t){return m(t)||!Array.isArray(t)?!1:typeof t[0]=="number"&&typeof t[1]=="number"&&typeof t[2]=="number"&&typeof t[3]=="number"}static equals(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}curve(t){const e=E(0,this.x1,t),n=E(0,this.y1,t),s=E(this.x1,this.x2,t),r=E(this.y1,this.y2,t),o=E(this.x2,1,t),a=E(this.y2,1,t),h=E(e,s,t),P=E(n,r,t),S=E(s,o,t),jt=E(r,a,t);return[E(h,S,t),E(P,jt,t)]}y(t){if(this.cache_.length===0){const e=[];for(let n=0;n<zt;n++)e.push(kn(this,b(n,0,zt-1,0,1)));this.cache_=e}return this.cache_[Math.round(b(H(t,0,1),0,1,0,zt-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const Mt={toComponents:i=>i.toObject(),fromComponents:i=>new R(...i)};function Vn(i){const t=f(2);return`cubic-bezier(${i.toObject().map(n=>t(n)).join(", ")})`}const de=[0,.5,.5,1];function zn(i){const t=i.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!t)return new R(...de);const e=[t[1],t[2],t[3],t[4]].reduce((n,s)=>{if(!n)return null;const r=Number(s);return isNaN(r)?null:[...n,r]},[]);return new R(...e??de)}const I=d("cbz");class ve{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(I()),e.viewProps.bindClassModifiers(this.element),e.foldable.bindExpandedClass(this.element,I(void 0,"expanded")),F(e.foldable,"completed",ot(this.element,I(void 0,"cpl")));const n=t.createElement("div");n.classList.add(I("h")),this.element.appendChild(n);const s=t.createElement("button");s.classList.add(I("b")),e.viewProps.bindDisabled(s);const r=t.createElementNS(w,"svg");r.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',s.appendChild(r),n.appendChild(s),this.buttonElement=s;const o=t.createElement("div");if(o.classList.add(I("t")),n.appendChild(o),this.textElement=o,e.pickerLayout==="inline"){const a=t.createElement("div");a.classList.add(I("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}const Tt=d("cbzp");class be{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Tt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Tt("g")),this.element.appendChild(n),this.graphElement=n;const s=t.createElement("div");s.classList.add(Tt("t")),this.element.appendChild(s),this.textElement=s}}function me(i,t){const e=new MutationObserver(s=>{for(const r of s)r.type==="childList"&&r.addedNodes.forEach(o=>{o.contains(o)&&(t(),e.disconnect())})}),n=i.ownerDocument;e.observe(n.body,{attributes:!0,childList:!0,subtree:!0})}const B=d("cbzg");function Mn(i,t){return e=>t(i(e))}class ge{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(B()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(B("p")),this.element.appendChild(n),this.previewElement=n;const s=t.createElementNS(w,"svg");s.classList.add(B("g")),this.element.appendChild(s),this.svgElem_=s;const r=t.createElementNS(w,"path");r.classList.add(B("u")),this.svgElem_.appendChild(r),this.guideElem_=r;const o=t.createElementNS(w,"polyline");o.classList.add(B("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[t.createElement("div"),t.createElement("div")],this.handleElems_.forEach(a=>{a.classList.add(B("h")),this.element.appendChild(a)}),this.vectorElems_=[t.createElementNS(w,"line"),t.createElementNS(w,"line")],this.vectorElems_.forEach(a=>{a.classList.add(B("v")),this.svgElem_.appendChild(a)}),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=e.selection,this.handleElems_.forEach((a,h)=>{L(this.sel_,Mn(P=>P===h,ot(a,B("h","sel"))))}),me(this.element,()=>{this.refresh()})}getVertMargin_(t){return t*.25}valueToPosition(t,e){const n=this.element.getBoundingClientRect(),s=n.width,r=n.height,o=this.getVertMargin_(r);return{x:b(t,0,1,0,s),y:b(e,0,1,r-o,o)}}positionToValue(t,e){const n=this.element.getBoundingClientRect(),s=n.width,r=n.height,o=this.getVertMargin_(r);return{x:H(b(t,0,s,0,1),0,1),y:b(e,r-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(r=>{const o=this.valueToPosition(0,r),a=this.valueToPosition(1,r);return[`M ${o.x},${o.y}`,`L ${a.x},${a.y}`].join(" ")}).join(" "));const t=this.value_.rawValue,e=[];let n=0;for(;;){const r=this.valueToPosition(...t.curve(n));if(e.push([r.x,r.y].join(",")),n>=1)break;n=Math.min(n+.05,1)}this.lineElem_.setAttributeNS(null,"points",e.join(" "));const s=t.toObject();[0,1].forEach(r=>{const o=this.valueToPosition(r,r),a=this.valueToPosition(s[r*2],s[r*2+1]),h=this.vectorElems_[r];h.setAttributeNS(null,"x1",String(o.x)),h.setAttributeNS(null,"y1",String(o.y)),h.setAttributeNS(null,"x2",String(a.x)),h.setAttributeNS(null,"y2",String(a.y));const P=this.handleElems_[r];P.style.left=`${a.x}px`,P.style.top=`${a.y}px`})}onValueChange_(){this.refresh()}}const _e=24,fe=400,we=1e3,X=d("cbzprv");class xe{constructor(t,e){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(X()),e.viewProps.bindClassModifiers(this.element);const n=t.createElementNS(w,"svg");n.classList.add(X("g")),this.element.appendChild(n),this.svgElem_=n;const s=t.createElementNS(w,"path");s.classList.add(X("t")),this.svgElem_.appendChild(s),this.ticksElem_=s;const r=t.createElement("div");r.classList.add(X("m")),this.element.appendChild(r),this.markerElem_=r,this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_),e.viewProps.handleDispose(this.onDispose_),me(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(X("m","a")),this.startTime_=new Date().getTime()+fe,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(X("m","a"))}onDispose_(){this.stop()}updateMarker_(t){const e=this.value_.rawValue.y(H(t,0,1));this.markerElem_.style.left=`${e*100}%`}refresh(){const t=this.svgElem_.getBoundingClientRect(),e=t.width,n=t.height,s=[],r=this.value_.rawValue;for(let o=0;o<_e;o++){const a=b(o,0,_e-1,0,1),h=b(r.y(a),0,1,0,e);s.push(`M ${h},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",s.join(" "))}onTimer_(){if(this.startTime_===null)return;const t=new Date().getTime()-this.startTime_,e=t/we;this.updateMarker_(e),t>we+fe&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function Lt(i,t,e,n){const s=e-i,r=n-t;return Math.sqrt(s*s+r*r)}function Tn(i,t,e,n){const s=Lt(i,t,e,n),r=Math.atan2(n-t,e-i),o=Math.round(r/(Math.PI/4))*Math.PI/4;return{x:i+Math.cos(o)*s,y:t+Math.sin(o)*s}}class Ce{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.sel_=M(0),this.viewProps=e.viewProps,this.view=new ge(t,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new xe(t,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",s=>{s.stopImmediatePropagation(),s.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const n=new bt(this.view.element);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(t,e,n){const s=this.sel_.rawValue,r=this.value.rawValue.toObject(),o=this.view.positionToValue(t.x,t.y),a=e?Tn(s,s,o.x,o.y):o;r[s*2]=a.x,r[s*2+1]=a.y,this.value.setRawValue(new R(...r),n)}onPointerDown_(t){const e=t.data;if(!e.point)return;const n=this.value.rawValue,s=this.view.valueToPosition(n.x1,n.y1),r=Lt(e.point.x,e.point.y,s.x,s.y),o=this.view.valueToPosition(n.x2,n.y2),a=Lt(e.point.x,e.point.y,o.x,o.y);this.sel_.rawValue=r<=a?0:1,this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(t){re(t.key)&&t.preventDefault();const e=this.sel_.rawValue,n=this.value.rawValue.toObject();n[e*2]+=q(this.baseStep_,se(t)),n[e*2+1]+=q(this.baseStep_,vt(t)),this.value.setRawValue(new R(...n),{forceEmit:!1,last:!1})}onKeyUp_(t){re(t.key)&&t.preventDefault();const e=q(this.baseStep_,se(t)),n=q(this.baseStep_,vt(t));e===0&&n===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ye{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new be(t,{viewProps:this.viewProps}),this.gc_=new Ce(t,{baseStep:e.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const n=Object.assign(Object.assign({},e.axis),{constraint:new xt({max:1,min:0})}),s=Object.assign(Object.assign({},e.axis),{constraint:void 0});this.tc_=new kt(t,{assembly:Mt,axes:[n,s,n,s],parser:ct,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(t=>t.inputElement)]}refresh(){this.gc_.refresh()}}class Dt{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=ai(e.expanded),this.view=new ve(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new bi(t,{parser:zn,props:v.fromObject({formatter:Vn}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=e.pickerLayout==="popup"?new di(t,{viewProps:this.viewProps}):null;const n=new ye(t,{axis:e.axis,value:this.value,viewProps:this.viewProps});n.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),L(this.popC_.shows,s=>{s&&n.refresh()}),ne({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s.rawValue,backward:(s,r)=>r.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pi(this.foldable_,this.view.pickerElement))}onButtonBlur_(t){if(!this.popC_)return;const e=t.relatedTarget;(!e||!this.popC_.view.element.contains(e))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=si(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!Ut(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_&&t.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function Ln(){return new vn({assembly:Mt,components:[0,1,2,3].map(i=>i%2===0?new xt({min:0,max:1}):void 0)})}const Dn={id:"cubic-bezier",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(i){const t=j,e=U(i,{value:t.required.array(t.required.number),view:t.required.constant("cubicbezier"),expanded:t.optional.boolean,label:t.optional.string,picker:t.optional.custom(n=>n==="inline"||n==="popup"?n:void 0)});return e?{params:e}:null},controller(i){var t,e;const n=new R(...i.params.value),s=M(n,{constraint:Ln(),equals:R.equals}),r=new Dt(i.document,{axis:{baseStep:.1,textProps:v.fromObject({draggingScale:.01,formatter:f(2)})},expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,pickerLayout:(e=i.params.picker)!==null&&e!==void 0?e:"popup",value:s,viewProps:i.viewProps});return new pt(i.document,{blade:i.blade,props:v.fromObject({label:i.params.label}),valueController:r})},api(i){return!(i.controller instanceof pt)||!(i.controller.valueController instanceof Dt)?null:new ce(i.controller)}};class Ee extends u{begin(){this.controller_.valueController.begin()}end(){this.controller_.valueController.end()}}const Pe=20;class ke{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(t){this.start_=t.getTime()}calculateFps_(t){if(this.timestamps_.length===0)return null;const e=this.timestamps_[0];return 1e3*(this.frameCount_-e.frameCount)/(t-e.time)}compactTimestamps_(){if(this.timestamps_.length<=Pe)return;const t=this.timestamps_.length-Pe;this.timestamps_.splice(0,t);const e=this.timestamps_[0].frameCount;this.timestamps_.forEach(n=>{n.frameCount-=e}),this.frameCount_-=e}end(t){if(this.start_===null)return;const e=t.getTime();this.duration_=e-this.start_,this.start_=null,this.fps_=this.calculateFps_(e),this.timestamps_.push({frameCount:this.frameCount_,time:e}),++this.frameCount_,this.compactTimestamps_()}}const tt=d("fps");class Ve{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(tt()),e.viewProps.bindClassModifiers(this.element),this.graphElement=t.createElement("div"),this.graphElement.classList.add(tt("g")),this.element.appendChild(this.graphElement);const n=t.createElement("div");n.classList.add(tt("l")),this.element.appendChild(n);const s=t.createElement("span");s.classList.add(tt("v")),s.textContent="--",n.appendChild(s),this.valueElement=s;const r=t.createElement("span");r.classList.add(tt("u")),r.textContent="FPS",n.appendChild(r)}}class St{constructor(t,e){this.stopwatch_=new ke,this.onTick_=this.onTick_.bind(this),this.ticker_=e.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=e.value,this.viewProps=e.viewProps,this.view=new Ve(t,{viewProps:this.viewProps}),this.graphC_=new xn(t,{formatter:f(0),lineCount:e.lineCount,props:v.fromObject({maxValue:e.maxValue,minValue:e.minValue}),value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const t=this.stopwatch_.fps;if(t!==null){const e=this.value_.rawValue;this.value_.rawValue=Xi(e,t),this.view.valueElement.textContent=t.toFixed(0)}}}function Sn(i,t){return t===0?new ui:new hi(i,t??fn.monitor.defaultInterval)}const On={id:"fpsgraph",type:"blade",accept(i){const t=j,e=U(i,{view:t.required.constant("fpsgraph"),interval:t.optional.number,label:t.optional.string,lineCount:t.optional.number,max:t.optional.number,min:t.optional.number});return e?{params:e}:null},controller(i){var t,e,n,s;const r=(t=i.params.interval)!==null&&t!==void 0?t:500;return new lt(i.document,{blade:i.blade,props:v.fromObject({label:i.params.label}),valueController:new St(i.document,{lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:2,maxValue:(n=i.params.max)!==null&&n!==void 0?n:90,minValue:(s=i.params.min)!==null&&s!==void 0?s:0,ticker:Sn(i.document,r),value:qi(80),viewProps:i.viewProps})})},api(i){return!(i.controller instanceof lt)||!(i.controller.valueController instanceof St)?null:new Ee(i.controller)}};class x{constructor(t,e){this.min=t,this.max=e}static isObject(t){if(typeof t!="object"||t===null)return!1;const e=t.min,n=t.max;return!(typeof e!="number"||typeof n!="number")}static equals(t,e){return t.min===e.min&&t.max===e.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const Ot={fromComponents:i=>new x(i[0],i[1]),toComponents:i=>[i.min,i.max]};class Rt{constructor(t){this.edge=t}constrain(t){var e,n,s,r,o,a,h,P;if(t.min<=t.max)return new x((n=(e=this.edge)===null||e===void 0?void 0:e.constrain(t.min))!==null&&n!==void 0?n:t.min,(r=(s=this.edge)===null||s===void 0?void 0:s.constrain(t.max))!==null&&r!==void 0?r:t.max);const S=(t.min+t.max)/2;return new x((a=(o=this.edge)===null||o===void 0?void 0:o.constrain(S))!==null&&a!==void 0?a:S,(P=(h=this.edge)===null||h===void 0?void 0:h.constrain(S))!==null&&P!==void 0?P:S)}}const Bt=d("rsltxt");class ze{constructor(t,e){this.sliderView_=e.sliderView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add(Bt());const n=t.createElement("div");n.classList.add(Bt("s")),n.appendChild(this.sliderView_.element),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(Bt("t")),s.appendChild(this.textView_.element),this.element.appendChild(s)}}const $=d("rsl");class Me{constructor(t,e){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=e.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=t.createElement("div"),this.element.classList.add($()),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_);const n=t.createElement("div");n.classList.add($("t")),this.element.appendChild(n),this.trackElement=n;const s=t.createElement("div");s.classList.add($("b")),n.appendChild(s),this.barElement=s;const r=["min","max"].map(o=>{const a=t.createElement("div");return a.classList.add($("k"),$("k",o)),n.appendChild(a),a});this.knobElements=[r[0],r[1]],this.update_()}valueToX_(t){const e=this.sliderProps_.get("minValue"),n=this.sliderProps_.get("maxValue");return H(b(t,e,n,0,1),0,1)*100}update_(){const t=this.value_.rawValue;t.length===0?this.element.classList.add($(void 0,"zero")):this.element.classList.remove($(void 0,"zero"));const e=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left=`${e[0]}%`,this.barElement.style.right=`${100-e[1]}%`,this.knobElements.forEach((n,s)=>{n.style.left=`${e[s]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Te{constructor(t,e){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=e.sliderProps,this.viewProps=e.viewProps,this.value=e.value,this.view=new Me(t,{sliderProps:this.sliderProps,value:this.value,viewProps:e.viewProps});const n=new bt(this.view.trackElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(t){if(!t.point)return null;const e=(t.point.x+this.ofs_())/t.bounds.width,n=this.sliderProps.get("minValue"),s=this.sliderProps.get("maxValue");return b(e,0,1,n,s)}onPointerDown_(t){if(!t.data.point)return;const e=t.data.point.x/t.data.bounds.width,n=this.value.rawValue,s=this.sliderProps.get("minValue"),r=this.sliderProps.get("maxValue"),o=b(n.min,s,r,0,1),a=b(n.max,s,r,0,1);Math.abs(a-e)<=.025?this.grabbing_="max":Math.abs(o-e)<=.025?this.grabbing_="min":e>=o&&e<=a?(this.grabbing_="length",this.grabOffset_=b(e-o,0,1,0,r-s)):e<o?(this.grabbing_="min",this.onPointerMove_(t)):e>a&&(this.grabbing_="max",this.onPointerMove_(t))}applyPointToValue_(t,e){const n=this.valueFromData_(t);if(n===null)return;const s=this.sliderProps.get("minValue"),r=this.sliderProps.get("maxValue");if(this.grabbing_==="min")this.value.setRawValue(new x(n,this.value.rawValue.max),e);else if(this.grabbing_==="max")this.value.setRawValue(new x(this.value.rawValue.min,n),e);else if(this.grabbing_==="length"){const o=this.value.rawValue.length;let a=n-this.grabOffset_,h=a+o;a<s?(a=s,h=s+o):h>r&&(a=r-o,h=r),this.value.setRawValue(new x(a,h),e)}}onPointerMove_(t){this.applyPointToValue_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.applyPointToValue_(t.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Le{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sc_=new Te(t,e);const n={baseStep:e.baseStep,constraint:e.constraint,textProps:v.fromObject({draggingScale:e.draggingScale,formatter:e.formatter})};this.tc_=new kt(t,{assembly:Ot,axes:[n,n],parser:e.parser,value:this.value,viewProps:e.viewProps}),this.view=new ze(t,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Rn(i){return x.isObject(i)?new x(i.min,i.max):new x(0,0)}function Bn(i,t){i.writeProperty("max",t.max),i.writeProperty("min",t.min)}function Nn(i){const t=[],e=_n(i);e&&t.push(e);const n=gn(i);return n&&t.push(n),new Rt(new Yt(t))}const jn={id:"input-interval",type:"input",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept:(i,t)=>{if(!x.isObject(i))return null;const e=j,n=U(t,{format:e.optional.function,max:e.optional.number,min:e.optional.number,step:e.optional.number});return n?{initialValue:new x(i.min,i.max),params:n}:null},binding:{reader:i=>Rn,constraint:i=>Nn(i.params),equals:x.equals,writer:i=>Bn},controller(i){var t;const e=i.value,n=i.constraint;if(!(n instanceof Rt))throw V.shouldNeverHappen();const s=(e.rawValue.min+e.rawValue.max)/2,r=(t=i.params.format)!==null&&t!==void 0?t:f(Qi(n.edge,s)),o=n.edge&&ut(n.edge,Wt);if(o)return new Le(i.document,{baseStep:ae(n.edge),constraint:n.edge,draggingScale:tn(n.edge,s),formatter:r,parser:ct,sliderProps:new v({maxValue:o.values.value("max"),minValue:o.values.value("min")}),value:e,viewProps:i.viewProps});const a={baseStep:ae(n.edge),constraint:n.edge,textProps:v.fromObject({draggingScale:s,formatter:r})};return new kt(i.document,{assembly:Ot,axes:[a,a],parser:ct,value:e,viewProps:i.viewProps})}};class De{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return(t=this.controller_.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller_.props.set("title",t)}}class Se extends C{constructor(t,e,n,s,r){super(t,s,r),this.cell=e,this.index=n}}class Oe extends u{constructor(t){super(t),this.cellToApiMap_=new Map,this.controller_.valueController.cellControllers.forEach(n=>{const s=new De(n);this.cellToApiMap_.set(n,s)})}get value(){return this.controller_.value}cell(t,e){const n=this.controller_.valueController,s=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(s)}on(t,e){const n=e.bind(this);this.controller_.value.emitter.on(t,s=>{const r=this.controller_.valueController,o=r.findCellByValue(s.rawValue);if(!o)return;const a=this.cellToApiMap_.get(o);if(!a)return;const h=r.cellControllers.indexOf(o);n(new Se(this,a,[h%r.size[0],Math.floor(h/r.size[0])],s.rawValue,void 0))})}}const et=d("rad");class Re{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(et()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(et("l")),this.element.appendChild(n);const s=t.createElement("input");s.classList.add(et("i")),s.name=e.name,s.type="radio",e.viewProps.bindDisabled(s),n.appendChild(s),this.inputElement=s;const r=t.createElement("div");r.classList.add(et("b")),n.appendChild(r);const o=t.createElement("div");o.classList.add(et("t")),r.appendChild(o),F(e.props,"title",a=>{o.textContent=a})}}class Be{constructor(t,e){this.props=e.props,this.viewProps=e.viewProps,this.view=new Re(t,{name:e.name,props:this.props,viewProps:this.viewProps})}}class gt{constructor(t,e){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=e.size;const[n,s]=this.size;for(let r=0;r<s;r++)for(let o=0;o<n;o++){const a=new Be(t,{name:e.groupName,props:v.fromObject(Object.assign({},e.cellConfig(o,r))),viewProps:A.create()});this.cellCs_.push(a),this.cellValues_.push(e.cellConfig(o,r).value)}this.value=e.value,L(this.value,r=>{const o=this.findCellByValue(r);o&&(o.view.inputElement.checked=!0)}),this.viewProps=A.create(),this.view=new Xt(t,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach(r=>{r.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(r.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(t){const e=this.cellValues_.findIndex(n=>n===t);return e<0?null:this.cellCs_[e]}onCellInputChange_(t){const e=t.currentTarget,n=this.cellCs_.findIndex(s=>s.view.inputElement===e);n<0||(this.value.rawValue=this.cellValues_[n])}}const An=function(){return{id:"radiogrid",type:"blade",accept(i){const t=j,e=U(i,{cells:t.required.function,groupName:t.required.string,size:t.required.array(t.required.number),value:t.required.raw,view:t.required.constant("radiogrid"),label:t.optional.string});return e?{params:e}:null},controller(i){return new pt(i.document,{blade:i.blade,props:v.fromObject({label:i.params.label}),valueController:new gt(i.document,{groupName:i.params.groupName,cellConfig:i.params.cells,size:i.params.size,value:M(i.params.value)})})},api(i){return!(i.controller instanceof pt)||!(i.controller.valueController instanceof gt)?null:new Oe(i.controller)}}}();function Nt(i){return{id:"input-radiogrid",type:"input",accept(t,e){if(!i.isType(t))return null;const n=j,s=U(e,{cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),view:n.required.constant("radiogrid")});return s?{initialValue:t,params:s}:null},binding:i.binding,controller:t=>new gt(t.document,{cellConfig:t.params.cells,groupName:t.params.groupName,size:t.params.size,value:t.value})}}const In=Nt({isType:i=>typeof i=="number",binding:{reader:i=>Gi,writer:i=>Pt}}),$n=Nt({isType:i=>typeof i=="string",binding:{reader:i=>Ui,writer:i=>Pt}}),Kn=Nt({isType:i=>typeof i=="boolean",binding:{reader:i=>mi,writer:i=>Pt}}),Gn=[yn,Dn,On,jn,An,Kn,In,$n];l.ButtonCellApi=ue,l.ButtonGridApi=he,l.ButtonGridController=Vt,l.CubicBezier=R,l.CubicBezierApi=ce,l.CubicBezierAssembly=Mt,l.CubicBezierController=Dt,l.CubicBezierGraphController=Ce,l.CubicBezierGraphView=ge,l.CubicBezierPickerController=ye,l.CubicBezierPickerView=be,l.CubicBezierPreviewView=xe,l.CubicBezierView=ve,l.FpsGraphBladeApi=Ee,l.FpsGraphController=St,l.FpsView=Ve,l.Fpswatch=ke,l.Interval=x,l.IntervalAssembly=Ot,l.IntervalConstraint=Rt,l.RadioCellApi=De,l.RadioController=Be,l.RadioGridApi=Oe,l.RadioGridController=gt,l.RadioView=Re,l.RangeSliderController=Te,l.RangeSliderTextController=Le,l.RangeSliderTextView=ze,l.RangeSliderView=Me,l.TpRadioGridChangeEvent=Se,l.plugins=Gn,Object.defineProperty(l,"__esModule",{value:!0})})})(os,nt);const as=Xn(nt),ls=Zn({__proto__:null,default:as},[nt]),it=Object.fromEntries(Object.entries(Object.assign({"./functions/CameraDebug.js":ts,"./functions/SceneDebug.js":is,"./functions/StatsDebug.js":rs})).map(([c,p])=>[c.split("/").pop().split(".")[0].replace("Debug",""),p]));var T,K,st,N,rt;class ds{constructor(){Y(this,T,void 0);Y(this,K,void 0);Y(this,st,void 0);Y(this,N,void 0);Y(this,rt,void 0);At.register(this),W(this,T,new Map),W(this,K,new Map)}async load(){W(this,rt,await Ae(()=>import("./tweakpane-0b15faf3.js").then(p=>p.t),["assets/tweakpane-0b15faf3.js","assets/_commonjsHelpers-725317a4.js"]))}init(){W(this,N,new(g(this,rt)).Pane({title:Yn})),g(this,N).registerPlugin(ls),W(this,st,g(this,N).addTab({pages:Wn.map(p=>({title:p}))}).pages)}addToParent(p,l,u){g(this,T).get(u)||g(this,T).set(u,[]),g(this,T).get(u).push(p),g(this,K).get(u)&&it[l].createPane(g(this,K).get(u),p,l)}add(p,l,u=0,_=""){var C,G,m,k;if(it[l]){(G=(C=it[l]).debug)==null||G.call(C,p);const V=(k=(m=it[l]).createPane)==null?void 0:k.call(m,g(this,st)[u],p,_||l);g(this,K).set(l,V),g(this,T).get(l)&&(g(this,T).get(l).forEach(z=>it[l](V,z,l)),g(this,T).delete(l))}else console.warn("No debug mapping found for",l)}onKeyDown(p){p==="h"&&(g(this,N).hidden=!g(this,N).hidden)}}T=new WeakMap,K=new WeakMap,st=new WeakMap,N=new WeakMap,rt=new WeakMap;export{ds as Mapping};
